@use "../abstracts" as *;

/** 

Styling for text content inside a writer field (https://getkirby.com/docs/reference/panel/fields/writer).

The `writer-fields` class is used to avoid styling these elements in other context.
Wrap any content in this class to apply the styles.

*/

.writer-fields {
  /* sensible defaults */
  --_space-xs: var(--spacing-xs);
  --_space-sm: var(--spacing-sm);
  --_space-md: var(--spacing-md);
  --_space-lg: var(--spacing-lg);
  --_space-xl: var(--spacing-xl);

  /* reset margins so we fully control rhythm */
  > * { margin: 0; }

  /* the stack: every next sibling gets a top margin */
  > * + * { margin-block-start: var(--flow-space, var(--_space-md)); }

  /* type presets */
  h2 { @include font-style(heading2); --flow-space: var(--_space-xl); }
  h3 { @include font-style(heading3); --flow-space: var(--_space-lg); }
  h4 { @include font-style(heading3); --flow-space: var(--_space-md); }
  h5 { @include font-style(heading4); --flow-space: var(--_space-md); }
  h6 { @include font-style(heading4); --flow-space: var(--_space-md); }
  p  {                                --flow-space: var(--_space-sm); }
  ul, ol {                            --flow-space: var(--_space-md); }

  /* tighten heading stacks (bigger â†’ smaller) */
  :is(h2) + :is(h3,h4,h5,h6) { margin-block-start: var(--_space-lg); }
  :is(h3) + :is(h4,h5,h6)    { margin-block-start: var(--_space-md); }
  :is(h4) + :is(h5,h6)       { margin-block-start: var(--_space-sm); }
  h5 + h6                     { margin-block-start: var(--_space-sm); }

  /* paragraph clusters */
  p + p { margin-block-start: var(--space-sm); }

  /* lists */
  :where(ul,ol) {
    padding-inline-start: 1.25rem;
    list-style-position: outside;
  }
  :where(li) + li { margin-block-start: 0.25em; }

  /* hyphenation & long-word safety (language matters!) */
  :where(p, li, blockquote, figcaption) {
    hyphens: auto;
    overflow-wrap: break-word; /* standard */
  }

  /* misc niceties for rich content */
  img, svg, video { display:block; max-inline-size:100%; block-size:auto; }
  a { text-underline-offset: .08em; text-decoration-thickness: .08em; }


  /* If users put more than one block into a layout column */
  .block + .block {
    margin-top: var(--_space-md);
  }
}
